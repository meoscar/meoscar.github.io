<!DOCTYPE html>
<html lang="en_US">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Leetcode4_Hard"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@"/>



  	<meta property="og:title" content="Leetcode4_Hard &middot; LeetCode 4 Geeks" />
  	<meta property="og:site_name" content="LeetCode 4 Geeks" />
  	<meta property="og:url" content="https://meoscar.github.io/leetcode4_hard/" />

    
        
            <meta property="og:image" content="/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2018-12-12T22:38:14&#43;08:00" />

    
    

    <title>Leetcode4_Hard &middot; LeetCode 4 Geeks</title>

    
    <meta name="description" content="4.&amp;nbsp;Median of Two Sorted Arrays  There are two sorted arrays&amp;nbsp;nums1&amp;nbsp;and&amp;nbsp;nums2&amp;nbsp;of size m and n respectively.
 Find the median of the two s" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://meoscar.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://meoscar.github.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://meoscar.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://meoscar.github.io/css/nav.css" />

    

    

    
      
          <link href="https://meoscar.github.io/index.xml" rel="alternate" type="application/rss+xml" title="LeetCode 4 Geeks" />
      
      
    
    <meta name="generator" content="Hugo 0.52" />

    <link rel="canonical" href="https://meoscar.github.io/leetcode4_hard/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": ,
        "logo": https://meoscar.github.io/images/meoscar.jpg
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "image": {
            "@type": "ImageObject",
            "url": https://meoscar.github.io/images/meoscar.jpg,
            "width": 250,
            "height": 250
        }, 
        
        "url": ,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": Leetcode4_Hard,
    "name": Leetcode4_Hard,
    "wordCount": 842,
    "timeRequired": "PT4M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://meoscar.github.io/leetcode4_hard/,
    "datePublished": 2018-12-12T22:38Z,
    "dateModified": 2018-12-12T22:38Z,
    
    
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://meoscar.github.io/leetcode4_hard/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://meoscar.github.io/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://google.com/">Google</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="https://meoscar.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="https://meoscar.github.io/"><img src="https://meoscar.github.io/images/meoscar.jpg" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Leetcode4_Hard</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2018-12-12T22:38:14&#43;08:00">
            Dec 12, 2018
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      <h1 id="3-longest-substring-without-repeating-characters">4.&nbsp;Median of Two Sorted Arrays</h1>
<pre><code class="lang-java"></code></pre>
<p>There are two sorted arrays&nbsp;<strong>nums1</strong>&nbsp;and&nbsp;<strong>nums2</strong>&nbsp;of size m and n respectively.</p>
<pre><code class="lang-java"></code></pre>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<pre><code class="lang-java"></code></pre>
<p>You may assume&nbsp;<strong>nums1</strong>&nbsp;and&nbsp;<strong>nums2</strong>&nbsp;cannot be both empty.</p>
<pre><code class="lang-java"></code></pre>
<p><strong>Example 1:</strong></p>
<pre><code class="lang-java"></code></pre>
<pre>nums1 = [1, 3]
nums2 = [2]

The median is 2.0
</pre>
<pre><code class="lang-java"></code></pre>
<p><strong>Example 2:</strong></p>
<pre><code class="lang-java"></code></pre>
<pre>nums1 = [1, 2]
nums2 = [3, 4]

The median is (2 + 3)/2 = 2.5<br /><br /><br /></pre>
<pre><br />public class leetcode4_findMedianSortedArrays {<br /><br />    /**<br />     * combine two arrays and find the kth element!<br />     * */<br /><br />    /**<br />     * time O(m+n)<br />     * */<br />    public double findMedianSortedArrays(int[] nums1, int[] nums2) {<br /><br />        int firstLength = 0;<br />        int secondLength = 0;<br />        firstLength = nums1.length;<br />        secondLength = nums2.length;<br /><br />        //System.out.print(firstLength + " " + secondLength);<br /><br />        int total = firstLength + secondLength;<br />        double[] combine = new double[total];<br /><br />        int count = 0;<br />        boolean even = false;<br />        boolean num1Stop = false;<br />        boolean num2Stop = false;<br /><br />        if(((secondLength + firstLength) % 2) ==0) {//even<br />            even = true;<br />        }<br /><br />        if(nums1.length == 0) {<br />            if(even) {<br />                return (double) (nums2[((secondLength + firstLength) /2 ) -1] + nums2[((secondLength + firstLength) /2 )]) /2;<br />            } else {<br />                return (double) nums2[((secondLength + firstLength) /2 )];<br />            }<br />        }<br /><br />        if(nums2.length == 0) {<br />            if(even) {<br />                return (double) (nums1[((secondLength + firstLength) /2 ) -1] + nums1[((secondLength + firstLength) /2 )]) /2;<br />            } else {<br />                return (double) nums1[((secondLength + firstLength) /2 )];<br />            }<br />        }<br /><br />        for(int i = 0, countl = 0, count2 = 0 ; i &lt; total; i++) {<br /><br />            if(!num2Stop &amp;&amp; !num1Stop) {<br />                if (nums1[countl] &lt; nums2[count2]) {<br />                    combine[i] = nums1[countl];<br />                    if (countl == nums1.length - 1) {<br />                        num1Stop = true;<br />                    }<br />                    countl++;<br />                } else {<br />                    combine[i] = nums2[count2];<br />                    if (count2 == nums2.length - 1) {<br />                        num2Stop = true;<br />                    }<br /><br />                    count2++;<br />                }<br />            } else {<br />                if(num1Stop) {<br />                    combine[i] = nums2[count2];<br />                    count2++;<br />                } else if (num2Stop) {<br />                    combine[i] = nums1[countl];<br />                    countl++;<br />                }<br />            }<br /><br />            //System.out.print("comnbine = " +  combine[i] + "\n");<br />            if(i == ((secondLength + firstLength) /2 )) {<br />                count = i;<br />                break;<br />            }<br /><br />            count++;<br />        }<br /><br /><br />        if(even) {<br />            return (combine[count -1] + combine[count]) /2;<br />        } else {<br />            return combine[count];<br />        }<br />    }<br /><br /><br />    /***<br />     * use "binary search" idea, time : O(log(m+n))<br />     */<br /><br /><br /><br />    /**<br />     * thought 1 : two sorted array, find the kth big element,<br />     *<br />     * 理想狀況 : 整體第k大的會在  第一個array的第k/2 或者是第二個array的第k/2,  因為當兩個array 合併後, k/2 + k/2<br />     *  array1 :  1 3 5 7<br />     *  array2 :  2 4 6<br />     *<br />     *  array 1 : 2 4 6<br />     *  array 2 : 1 3 5 7<br />     *<br />     *  但若是array1 中幾乎都比array2小 , 則導致array1 的第k/2個依然太小, array2 的第k/2會太大<br />     *  所以可以不考慮array1的前k/2 跟 array2的後k/2  -&gt; 整體減少k個元素, 若找中位數, 則k = (m+n)/2, 等於一次少一半的數量, time(log(m+n))<br />     *  array1 : 1 2 3 4<br />     *  array2 : 5 6 7<br />     *<br />     * 同理<br />     *<br />     * 若是array2 中幾乎都比array1小 , 則導致array2 的第k/2個依然太小, array1 的第k/2會太大<br />     * 所以可以不考慮array2的前k/2 跟 array1的後k/2  -&gt; 整體減少k個元素, 若找中位數, 則k = (m+n)/2, 等於一次少一半的數量, time(log(m+n))<br />     * array1 : 5 6 7<br />     * array2 : 1 2 3 4<br />     *<br />     * */<br /><br />    public double findMedianSortedArrays2(int[] nums1, int[] nums2) {<br />        int firstLength = nums1.length;<br />        int secondLength = nums2.length;<br /><br />        int total = firstLength + secondLength;<br />        if(((secondLength + firstLength) % 2) ==0) {//even<br />            return (double)(helper(nums1, 0, nums1.length -1,  nums2, 0,nums2.length -1, ((secondLength + firstLength)/2) ) + helper(nums1,0, nums1.length- 1,nums2,0,  nums2.length - 1,((secondLength + firstLength)/2) + 1 )) /2;<br />        } else {<br />            //odd -&gt; + 1<br />            return (double)helper(nums1, 0, nums1.length-1, nums2, 0, nums2.length -1, ((secondLength + firstLength)/2) + 1 );<br />        }<br /><br />    }<br />    public double helper(int[] nums1, int start1,int end1, int[] nums2, int start2, int end2, int target) {<br /><br />        //case 1<br />        /**<br />         * 這個演算法預期第一個array總數比較小, 所以要顛倒一下<br />         * */<br />        if(end1 - start1 + 1  &gt; end2 - start2 + 1) {<br />            //System.out.print("reverse\n");<br />            return helper(nums2, start2, end2, nums1, start1, end1 ,target);<br />        }<br /><br />        //case 2<br />        /**<br />         * 第一個是空的, 我們只需要看第二個<br />         * */<br />        if((end1 - start1 + 1) == 0) {<br />            //System.out.print(start2 + " " + target + "\n");<br />            return nums2[start2 + target - 1];<br />        }<br /><br />        //case 3<br />        /**<br />         * 若要找的k = 1, 表示只有可能是兩個array中的其中一個第一個<br />         * 依然可以用在中位數上面, k = 中位數, 表示{1}{2}<br />         * */<br />        if(target == 1) {<br />            return Math.min(nums1[start1], nums2[start2]);<br />        }<br /><br />        //case others<br />        /**<br />         * start1 ... start1 + pa -1 ... end1<br />         * start2 ... start2 + pb -1 ... end2<br />         * */<br /><br />        int pa = Math.min(target / 2, end1 -start1 + 1);<br />        int pb = target - pa;<br /><br />        if(nums1[start1 + pa - 1] &gt; nums2[start2 + pb - 1]) {<br />            return helper(nums1, start1, start1 + pa -1 , nums2, start2 + pb, end2, target - pb);<br />        } else if (nums1[start1 + pa - 1] &lt; nums2[start2 + pb -1]) {<br />            return helper(nums1, start1 + pa  ,end1, nums2, start2, start2 + pb -1,target - pa);<br />        } else {// equals<br />            return nums1[start1 + pa - 1 ]; //or nums2[star2 + pb -1 ]<br />        }<br />    }<br /><br /><br />    /**<br />     * 當進入到遞迴之後, 我們已經砍掉一半(k/2)的元素, 所以原本要找第k的, 就會變成要找下一個round的 k- k/2  (因為我們把比較小的數(k/2)刪掉了)<br />     * */<br /><br /><br />    public static void main(String[] args) {<br />        leetcode4_findMedianSortedArrays f = new leetcode4_findMedianSortedArrays();<br />        int[] first = {1,3};<br />        int[] second = {2};<br />        double res = f.findMedianSortedArrays(first, second);<br />        System.out.print("res = " + res);<br /><br />        System.out.print("\n");<br /><br />        double res2 = f.findMedianSortedArrays2(first, second);<br />        System.out.print("res 2 = " + res2);<br />    }<br />}<br />//1 3 4 5 6 7 8<br />/***<br /> * {} {2,3}<br /> * {} {1}<br /> * {1,2} {}<br /> * {1,3} 2}<br /> */<br /><br /></pre>
<pre><code class="lang-java"></code></pre>

    </section>


  <footer class="post-footer">


    




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Leetcode4_Hard&nbsp;-&nbsp;LeetCode%204%20Geeks&amp;url=https%3a%2f%2fmeoscar.github.io%2fleetcode4_hard%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmeoscar.github.io%2fleetcode4_hard%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fmeoscar.github.io%2fleetcode4_hard%2f&amp;description=Leetcode4_Hard"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fmeoscar.github.io%2fleetcode4_hard%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    







  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="https://meoscar.github.io/leetcode5_medium/">
          <section class="post">
              <h2>Leetcode5_Medium</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="https://meoscar.github.io/leetcode3_medium/">
          <section class="post">
              <h2>Leetcode3_Medium</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">LeetCode 4 Geeks</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://meoscar.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://meoscar.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://meoscar.github.io/js/index.js"></script>
    
</body>
</html>

